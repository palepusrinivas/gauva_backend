server:
  port: 8080

# Socket.IO server configuration
# Note: Socket.IO runs on a separate Netty server, so it needs its own port
# For Azure App Service, set SOCKETIO_ENABLED=false or socketio.enabled=false
# Azure only exposes one port, so Socket.IO cannot run on a separate port
socketio:
  enabled: true  # Set to false to disable Socket.IO (useful for Azure App Service)
  port: 9090  # Separate port for Socket.IO (default: 9090)
  host: 0.0.0.0

spring:
  datasource:
    url: jdbc:mysql://178.212.35.218:3306/dev_gauva_db?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
    username: gauva_gauva
    password: 442200@Com
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000  # 30 minutes (shorter to prevent closed connection errors)
      leak-detection-threshold: 60000
      connection-test-query: SELECT 1

  jpa:
    hibernate:
      ddl-auto: update
    
    show-sql: false
    properties:
      format_sql: true
      hibernate.dialect: org.hibernate.dialect.MySQLDialect
    open-in-view: false
  flyway:
    enabled: false
    baseline-on-migrate: true
    baseline-version: 0
  mail:
    host: ${APP_MAIL_HOST:localhost}
    port: ${APP_MAIL_PORT:1025}
    username: ${APP_MAIL_USERNAME:}
    password: ${APP_MAIL_PASSWORD:}
    properties:
      mail:
        smtp:
          auth: ${APP_MAIL_SMTP_AUTH:false}
          starttls:
            enable: ${APP_MAIL_STARTTLS:false}

  data:
    redis:
      host: ${REDIS_HOST:redis-18083.c322.us-east-1-2.ec2.redns.redis-cloud.com}
      port: ${REDIS_PORT:18083}
      username: ${REDIS_USERNAME:}
      password: ${REDIS_PASSWORD:}
      ssl:
        enabled: ${REDIS_SSL:true}

app:
  cors:
    allowed-origins: "*"
  frontend:
    url: ${APP_FRONTEND_URL:http://localhost:3000}
  razorpay:
    key-id: rzp_test_RVmSxTBdwWng9o
    key-secret: L0Q7LVHqXj1seMQut0D87m5S
    webhook-secret: razorpay@gauva
  wallet:
    commission-rate: 0.10
    topup:
      min-amount: 10
      max-amount: 50000
  logging:
    log-path: logs
    upload-enabled: true
  storage:
    kyc-prefix: ${APP_STORAGE_KYC_PREFIX:drivers}
  firebase:
    project-id: ${FIREBASE_PROJECT_ID:gauva-15d9a}
    # Firebase Storage bucket (new format: .firebasestorage.app)
    storage-bucket: ${FIREBASE_STORAGE_BUCKET:gauva-15d9a.firebasestorage.app}
    credentials-b64: ${FIREBASE_CREDENTIALS_B64:}
    credentials-path: ${FIREBASE_CREDENTIALS_PATH:gauva-15d9a-firebase-adminsdk-fbsvc-ea3bd62754.json}
    # Use firebasestorage.app bucket for gs:// paths
    documents-gs-path: ${FIREBASE_DOCUMENTS_GS_PATH:gs://gauva-15d9a.firebasestorage.app/documents}
    logs-gs-path: ${FIREBASE_LOGS_GS_PATH:gs://gauva-15d9a.firebasestorage.app/app_logs}
    limits:
      doc-max-bytes: ${FIREBASE_DOC_MAX_BYTES:2097152}   # 2MB
      log-max-bytes: ${FIREBASE_LOG_MAX_BYTES:5242880}   # 5MB
  notify:
    email:
      from: ${APP_MAIL_FROM:no-reply@example.com}
    sms:
      provider: ${APP_SMS_PROVIDER:dummy}
      api-key: ${APP_SMS_API_KEY:}
      sender-id: ${APP_SMS_SENDER:RIDFST}
    fcm:
      server-key: ${APP_FCM_SERVER_KEY:}

  admin:
    # Seed admin user from JSON file on startup
    # This will automatically create the admin user when the application starts
    seed-json-path: src/main/resources/admin-seed.json
    # Alternative: Use environment variables instead of JSON file
    # username: ${APP_ADMIN_USERNAME:murthy@testing.com}
    # password: ${APP_ADMIN_PASSWORD:mmurthy123}
    # role: ${APP_ADMIN_ROLE:ROLE_ADMIN}

management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      probes:
        enabled: true
      show-details: always
